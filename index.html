<script>
    let dadosLicitacoes = []; // Agora alimentado pelo fetch do GZIP
    let pagina = 1;
    const itensPorPagina = 15;

    // --- NOVA FUNÇÃO DE CARREGAMENTO (AJUSTADA PARA .GZ) ---
    async function carregarDadosGzip() {
        try {
            const response = await fetch('dados/oportunidades.json.gz');
            if (!response.ok) throw new Error("Erro ao buscar o arquivo .gz");

            // Pipeline de descompressão
            const ds = new DecompressionStream("gzip");
            const decompressedStream = response.body.pipeThrough(ds);
            const jsonText = await new Response(decompressedStream).text();
            
            // Converte o texto JSON puro para o array de objetos
            dadosLicitacoes = JSON.parse(jsonText);
            
            console.log("Base de dados carregada e descompactada com sucesso!");
            render(); // Chama sua função original de renderização
        } catch (error) {
            console.error("Erro no carregamento:", error);
            document.getElementById('containerLicitacoes').innerHTML = `
                <div class="alert alert-warning">
                    Erro ao carregar dados. Verifique se o arquivo 'dados/oportunidades.json.gz' existe.
                </div>`;
        }
    }

    // Inicializa o carregamento ao abrir a página
    window.onload = carregarDadosGzip;

    // --- MANTENHA TODAS AS SUAS FUNÇÕES ORIGINAIS ABAIXO ---
    // (render, verDetalhes, excluirLicitacao, limparFiltros, etc.)
    
    function render() {
        // ... (seu código original do render sem alterações)
        const container = document.getElementById('containerLicitacoes');
        const busca = document.getElementById('fBusca').value.toLowerCase();
        // ... restante da sua lógica de filtro
    }

    // ... e assim por diante
</script>
