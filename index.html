async function carregarBaseGzip() {
    const loaderText = document.getElementById('loaderText');
    const errorMessage = document.getElementById('errorMessage');

    try {
        // Adicionamos um parâmetro de tempo (?t=...) para ignorar o cache do navegador
        const cacheBuster = `?t=${new Date().getTime()}`;
        const urlComCacheBuster = 'dados/oportunidades.json.gz' + cacheBuster;

        const response = await fetch(urlComCacheBuster);
        
        if (!response.ok) {
            throw new Error("Arquivo não encontrado no servidor.");
        }

        const ds = new DecompressionStream("gzip");
        const decompressedStream = response.body.pipeThrough(ds);
        const jsonText = await new Response(decompressedStream).text();
        
        dadosLicitacoes = JSON.parse(jsonText);
        
        document.getElementById('loader').style.display = 'none';
        if (typeof render === "function") render(); 

    } catch (error) {
        console.error("Erro crítico:", error);
        document.querySelector('.spinner-border').style.display = 'none';
        if(loaderText) loaderText.style.display = 'none';
        if(errorMessage) {
            errorMessage.style.display = 'block';
            errorMessage.innerHTML = `⚠️ Erro: ${error.message}`;
        }
    }
}
